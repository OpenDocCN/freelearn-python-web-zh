["```py\ncatdoc command execution:\n```", "```py\n$ catdoc sample-doc-file.doc \nThis is a sample text for demo.\n```", "```py\n$ pipenv --python python3.6\n```", "```py\n[[source]]\n\nurl = \"https://pypi.python.org/simple\"\nverify_ssl = true\nname = \"pypi\"\n\n[dev-packages]\n\n[packages]\n\nfalcon = \"*\"\nfalcon-multipart = \"*\"\ngunicorn = \"*\"\nzappa = \"*\"\n\n[requires]\n\npython_version = \"3.6\"\n```", "```py\n/doc-parser API:\n```", "```py\nimport falcon\nfrom falcon_multipart.middleware import MultipartMiddleware\nfrom parser import doc_to_text\n\nclass DocParserResource:\n    def on_post(self, req, resp):\n        \"\"\"Handles POST requests\"\"\"\n        try:\n            file_object = req.get_param('file')\n\n            # file validation\n            if file_object.type != 'application/msword' or file_object.filename.split('.')[-1] != 'doc':\n                raise ValueError('Please provide a valid MS Office 93 -2003 document file.')\n\n            # calling _doc_to_text method from parser.py\n            text = doc_to_text(file_object)\n            quote = {\n                'text': text,\n                'file': file_object.filename\n            }\n            resp.media = quote\n        except Exception as e:\n            raise falcon.HTTPError(falcon.HTTP_500, str(e))\n\napi = falcon.API(middleware=[MultipartMiddleware()])\napi.add_route('/doc-parser', DocParserResource())\n```", "```py\nparser.py:\n```", "```py\nimport os\n\ndef doc_to_text(file_object):\n    data = ''\n    # save file in tmp\n    filepath = os.path.join('/tmp', file_object.filename)\n    with open(filepath, 'wb') as tmp_file:\n        while True:\n            chunk = file_object.file.read(4096)\n            tmp_file.write(chunk)\n            if not chunk:\n                break\n\n    # Parse and return text data\n    with os.popen('catdoc -a {0}'.format(filepath), 'r') as proc:\n        data = proc.read()\n    return data\n```", "```py\nzappa_settings.json file:\n```", "```py\n{\n    \"dev\": {\n        \"app_function\": \"resources.api\",\n        \"aws_region\": \"ap-south-1\",\n        \"profile_name\": \"default\",\n        \"project_name\": \"chapter12\",\n        \"runtime\": \"python3.6\",\n        \"s3_bucket\": \"zappa-xl0doooe4\"\n    }\n}\n```", "```py\nzappa deploy <stage_name>\u00a0command:\n```", "```py\n$ zappa deploy dev\nCalling deploy for stage dev..\nCreating chapter12-dev-ZappaLambdaExecutionRole IAM Role..\nCreating zappa-permissions policy on chapter12-dev-ZappaLambdaExecutionRole IAM Role.\nDownloading and installing dependencies..\n - sqlite==python36: Using precompiled lambda package\nPackaging project as zip.\nUploading chapter12-dev-1531957045.zip (5.7MiB)..\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 5.93M/5.93M [00:12<00:00, 372KB/s]\nScheduling..\nScheduled chapter12-dev-zappa-keep-warm-handler.keep_warm_callback with expression rate(4 minutes)!\nUploading chapter12-dev-template-1531957066.json (1.6KiB)..\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.62K/1.62K [00:00<00:00, 3.40KB/s]\nWaiting for stack chapter12-dev to create (this can take a bit)..\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 4/4 [00:09<00:00, 2.66s/res]\nDeploying API Gateway..\nDeployment complete!: [https://rbupm44rza.execute-api.ap-south-1.amazonaws.com/dev](https://rbupm44rza.execute-api.ap-south-1.amazonaws.com/dev)\n```", "```py\nzappa logs command:\n```", "```py\n[1532008716236] /bin/sh: catdoc: command not found\n[1532008716237] [INFO] 2018-07-19T13:58:36.237Z d4b00497-8b5b-11e8-8381-9510b412860f 103.19.39.2 - - [19/Jul/2018:13:58:36 +0000] \"POST /doc-parser HTTP/1.1\" 200 47 \"\" \"\" 0/68.15899999999999\n```", "```py\n$ sudo docker run --name doc-parser -v \"$PWD\":/var/task -v ~/.aws/:/root/.aws/ -e AWS_PROFILE=default -p \"8000:8000\" -it lambci/lambda:build-python3.6 bash\ndocker run command along with some options. These options are used to configure the container and set up the container environment. Let's have a look at these options:\n```", "```py\n$ sudo docker run --name doc-parser -v \"$PWD\":/var/task -v ~/.aws/:/root/.aws/ -e AWS_PROFILE=default -p \"8000:8000\" -it lambci/lambda:build-python3.6 bash\nbash-4.2# ls\nparser.py Pipfile Pipfile.lock __pycache__ resources.py sample-doc-file.doc zappa_settings.json\nbash-4.2# pwd\n/var/task\n```", "```py\nbash-4.2# yum install wget\nResolving Dependencies\n--> Running transaction check\n---> Package wget.x86_64 0:1.18-3.27.amzn1 will be installed\n--> Finished Dependency Resolution\n\nDependencies Resolved\n\n=========================================================================================================================================================================\n Package Arch Version Repository Size\n=========================================================================================================================================================================\nInstalling:\n wget x86_64 1.18-3.27.amzn1 amzn-updates 981 k\n\nTransaction Summary\n=========================================================================================================================================================================\nInstall 1 Package\n\nTotal download size: 981 k\nInstalled size: 2.4 M\nIs this ok [y/d/N]: y\nDownloading packages:\nwget-1.18-3.27.amzn1.x86_64.rpm | 981 kB 00:00:01 \nRunning transaction check\nRunning transaction test\nTransaction test succeeded\nRunning transaction\n  Installing : wget-1.18-3.27.amzn1.x86_64 1/1 \n  Verifying : wget-1.18-3.27.amzn1.x86_64 1/1 \n\nInstalled:\n  wget.x86_64 0:1.18-3.27.amzn1 \n\nComplete!\n```", "```py\nbash-4.2# mkdir lib\nbash-4.2# mkdir usr\nbash-4.2# ls\n***lib*** parser.py Pipfile Pipfile.lock __pycache__ resources.py sample-doc-file.doc ***usr*** zappa_settings.json\nbash-4.2# \n```", "```py\nbash-4.2# wget http://ftp.wagner.pp.ru/pub/catdoc/catdoc-0.95.tar.gz -O lib/catdoc-0.95.tar.gz\n--2018-07-19 23:00:39-- http://ftp.wagner.pp.ru/pub/catdoc/catdoc-0.95.tar.gz\nResolving ftp.wagner.pp.ru (ftp.wagner.pp.ru)... 78.46.190.96, 2a01:4f8:c17:2e5b::2\nConnecting to ftp.wagner.pp.ru (ftp.wagner.pp.ru)|78.46.190.96|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 217779 (213K) [application/x-gzip]\nSaving to: \u2018lib/catdoc-0.95.tar.gz\u2019\n\nlib/catdoc-0.95.tar.gz 100%[=====================================================================================>] 212.67K --.-KB/s in 0.07s \n\n2018-07-19 23:00:40 (2.93 MB/s) - \u2018lib/catdoc-0.95.tar.gz\u2019 saved [217779/217779]\n\nbash-4.2# \n```", "```py\nbash-4.2# cd lib/\nbash-4.2# ls\ncatdoc-0.95.tar.gz\nbash-4.2# tar -xf catdoc-0.95.tar.gz \nbash-4.2# ls\ncatdoc-0.95 catdoc-0.95.tar.gz\n```", "```py\nbash-4.2# ls\ncatdoc-0.95 catdoc-0.95.tar.gz\nbash-4.2# cd catdoc-0.95\nbash-4.2# ls\nacconfig.h CODING.STD configure COPYING INSTALL install-sh missing NEWS src\ncharsets compat configure.in doc INSTALL.dos Makefile.in mkinstalldirs README TODO\nbash-4.2# ./configure --prefix=/var/task/usr/\n```", "```py\nbash-4.2# make\n...\n...\n...\nbash-4.2# make install\n```", "```py\nbash-4.2# ls /var/task/usr/bin/\ncatdoc catppt wordview xls2csv\nbash-4.2# cd /var/task/\nbash-4.2# ls\nlib parser.py Pipfile Pipfile.lock __pycache__ resources.py sample-doc-file.doc usr zappa_settings.json\n```", "```py\nimport os\n\ndef doc_to_text(file_object):\n    data = ''\n    # save file in tmp\n    filepath = os.path.join('/tmp', file_object.filename)\n    with open(filepath, 'wb') as tmp_file:\n        while True:\n            chunk = file_object.file.read(4096)\n            tmp_file.write(chunk)\n            if not chunk:\n                break\n\n    # Parse and return text data\n    with os.popen('./usr/bin/catdoc -a {0}'.format(filepath), 'r') as proc:\n        data = proc.read()\n    return data\n```", "```py\nbash-4.2# pipenv install\nCreating a virtualenv for this project...\nPipfile: /var/task/Pipfile\nUsing /var/lang/bin/python3.6m (3.6.1) to create virtualenv...\nRunning virtualenv with interpreter /var/lang/bin/python3.6m\nUsing base prefix '/var/lang'\nNew python executable in /root/.local/share/virtualenvs/task-rlWbeMzF/bin/python3.6m\nAlso creating executable in /root/.local/share/virtualenvs/task-rlWbeMzF/bin/python\nInstalling setuptools, pip, wheel...done.\nSetting project for task-rlWbeMzF to /var/task\n\nVirtualenv location: /root/.local/share/virtualenvs/task-rlWbeMzF\nInstalling dependencies from Pipfile.lock (5f0d9b)...\nIgnoring futures: markers 'python_version < \"3\"' don't match your environment\nLooking in indexes: https://pypi.python.org/simple\n   \u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589\u2589 37/37 \u2014 00:00:45\nTo activate this project's virtualenv, run pipenv shell.\nAlternativaly, run a command inside the virtualenv with pipenv run.\nbash-4.2# \n```", "```py\nbash-4.2# pipenv shell\nPlease ensure that the SHELL environment variable is set before activating shell.\nbash-4.2# \n```", "```py\nbash-4.2# export SHELL=/bin/bash pipenv shell\nbash-4.2# pipenv shell\nSpawning environment shell (/bin/bash). Use 'exit' to leave.\n . /root/.local/share/virtualenvs/task-rlWbeMzF/bin/activate\nbash-4.2# . /root/.local/share/virtualenvs/task-rlWbeMzF/bin/activate\n(task-rlWbeMzF) bash-4.2# \n```", "```py\n(task-rlWbeMzF) bash-4.2# zappa update dev\n(python-dateutil 2.7.3 (/var/runtime), Requirement.parse('python-dateutil<2.7.0,>=2.6.1'), {'zappa'})\nCalling update for stage dev..\nDownloading and installing dependencies..\n - sqlite==python36: Using precompiled lambda package\nPackaging project as zip.\nUploading chapter12-dev-1532044423.zip (6.5MiB)..\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 6.78M/6.78M [00:14<00:00, 286KB/s]\nUpdating Lambda function code..\nUpdating Lambda function configuration..\nUploading chapter12-dev-template-1532044458.json (1.6KiB)..\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1.62K/1.62K [00:00<00:00, 5.20KB/s]\nDeploying API Gateway..\nScheduling..\nUnscheduled chapter12-dev-zappa-keep-warm-handler.keep_warm_callback.\nScheduled chapter12-dev-zappa-keep-warm-handler.keep_warm_callback with expression rate(4 minutes)!\nYour updated Zappa deployment is live!: https://rbupm44rza.execute-api.ap-south-1.amazonaws.com/dev\n```"]